<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Page 3 | Archives | Lets Dive!</title>
  <meta name="author" content="Lukas Pukenis">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="Lets Dive!"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Lets Dive!" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">Lets Dive!</a></h1>
  <h2><a href="/"></a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
<h2 class="archive-title">Archives</h2>


  
    <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-04-12T08:02:39.000Z"><a href="/2014/04/12/minilang---a-simple-parser-in-c/">Apr 12 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/04/12/minilang---a-simple-parser-in-c/">Minilang   a Simple Parser in C</a></h1>
  

    </header>
    <div class="entry">
      
        <p>I developed a new goal - to learn C and C++ while implementing cool stuff. My first idea is to write a basic mathematical equations parser and solver to solve simple equations like <code>1 + 1 * 3</code> up to <code>5 + 8 * (9 - 4 * (10 * 5) + 7)</code>.</p>
<p>I have hosted <em>minilang</em> on <a href="https://github.com/LukasPukenis/minilang" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Getting_tokens">Getting tokens</h2>
<p>So firstly I have an input like a predefined string or from <code>scanf()</code> it doesn’t matter. And I want to have tokens meaning <code>1 + 2</code> would have 3 tokens: <code>1</code>, <code>+</code> and <code>2</code>.</p>
<p>My idea is to build a linked-list like structure and have each token point to another. After this list is complete I should transform it into AST(Abstract Syntax Tree).</p>
<p>So lets begin to build. First I will need to have some structs. <code>node_value</code> is union struct where I can hold INTs or FLOATs in the same place without actually holding two fields.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="code"><pre>union node_value {
	<span class="keyword">int</span> iValue;
	<span class="keyword">float</span> fValue;
};

<span class="keyword">struct</span> ast {
	<span class="keyword">enum</span> { VALUE, OPERATOR } node_type;
	<span class="keyword">enum</span> { INT, FLOAT} value_type;
	<span class="keyword">enum</span> { ADD, SUB, MUL, DIV} operator_type;
	short precedence;
	union node_value value;
	<span class="keyword">struct</span> ast* next;
};
</pre></td></tr></table></figure>

<p>AST struct is maybe more complicated but it only shows that node can be VALUE or OPERATOR, it’s type(INT or FLOAT) if it’s a value and operator type if it’s an operator. Precedence is just for the future(as * and / are higher precedence than + or -). And I have <code>next</code> at the end to point to the next node.</p>
<h2 id="Lets_give_it_an_input">Lets give it an input</h2>
<p><code>char input[] = &quot;123+456.78&quot;;</code><br>I am okay with this.</p>
<h2 id="My_ugly_main_function">My ugly main function</h2>
<p>I go through each character in input while detecting if current char is a digit or not. If it’s not a digit I check to see if it was before - <code>last_was_numeric</code>. <code>dot_was_detected</code> shows that it’s a float value so we can distinguish between integers and floats.</p>
<p><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
</pre></td><td class="code"><pre><span class="keyword">int</span> main(<span class="keyword">int</span> argc, <span class="keyword">char</span>** argv)
{
	<span class="built_in">printf</span>(<span class="string">"Lets process this: %s\n"</span>, input);

	<span class="keyword">struct</span> ast * ast_head = (<span class="keyword">struct</span> ast*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> ast));
	ast_head-&gt;next = NULL;

	<span class="comment">// This will be set once numeric is detected. Then if dot is detected it will be known it's float</span>
	<span class="keyword">int</span> numeric_start_pos = -<span class="number">1</span>;
	<span class="keyword">union</span> node_value numeric;
	<span class="keyword">bool</span> last_was_numeric = <span class="keyword">false</span>;
	<span class="keyword">bool</span> dot_was_detected = <span class="keyword">false</span>;

	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>, len = <span class="keyword">sizeof</span>(input) - <span class="number">1</span>; i &lt; len; i++) {
		<span class="built_in">printf</span>(<span class="string">"\nProcessing %c\n"</span>, input[i]);
		<span class="keyword">char</span> val = input[i];		

		<span class="keyword">if</span> (val &gt;= <span class="string">'0'</span> && val &lt;= <span class="string">'9'</span>) {
			<span class="built_in">printf</span>(<span class="string">"Numeric detected at %d. Not sure if int or float yet\n"</span>, i);
			<span class="keyword">if</span> (numeric_start_pos == -<span class="number">1</span> && !last_was_numeric) {
				numeric_start_pos = i;
				last_was_numeric = <span class="keyword">true</span>;
			}			

		} <span class="keyword">else</span> <span class="keyword">if</span> (val == <span class="string">'+'</span> || val == <span class="string">'-'</span>) {	<span class="built_in">printf</span>(<span class="string">"+ or - detected\n"</span>); }
		<span class="keyword">else</span> <span class="keyword">if</span> (val == <span class="string">'*'</span> && val == <span class="string">'/'</span>) { <span class="built_in">printf</span>(<span class="string">"* or / detected\n"</span>); }
		<span class="keyword">else</span> <span class="keyword">if</span> (val == <span class="string">'.'</span>) { dot_was_detected = <span class="keyword">true</span>;	}
		<span class="keyword">else</span> { <span class="built_in">printf</span>(<span class="string">"Unsupported operator\n"</span>); }

		<span class="comment">// check for numeric token end</span>
		<span class="keyword">if</span> ( i+<span class="number">1</span> == len || ((val &lt; <span class="string">'0'</span> || val &gt; <span class="string">'9'</span>) && val != <span class="string">'.'</span> && numeric_start_pos != -<span class="number">1</span> && last_was_numeric)) {
			<span class="built_in">printf</span>(<span class="string">"Numeric ended at %d\n"</span>, i);

			<span class="keyword">char</span> buffer[<span class="number">100</span>];
			<span class="built_in">memset</span>(buffer, <span class="string">'\0'</span>, <span class="keyword">sizeof</span>(buffer));
			<span class="built_in">strncpy</span>(buffer, (input + numeric_start_pos), i - numeric_start_pos+<span class="number">1</span>);
			<span class="keyword">struct</span> ast * new_node = (<span class="keyword">struct</span> ast*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> ast));
			new_node-&gt;node_type = VALUE;
			new_node-&gt;next = NULL;

			<span class="keyword">if</span> (dot_was_detected) {
				new_node-&gt;value.fValue = atoi(buffer);
				new_node-&gt;value_type = FLOAT;
				<span class="keyword">struct</span> ast * curr = ast_head;

				<span class="comment">// rewing head to the last element</span>
				<span class="keyword">while</span> (curr-&gt;next != NULL) {
					curr = curr-&gt;next;
				}
				curr-&gt;next = new_node;

				<span class="built_in">printf</span>(<span class="string">"Float translated: %f"</span>, atof(buffer));
			}
			<span class="keyword">else</span> {				
				new_node-&gt;value.iValue = atoi(buffer);
				new_node-&gt;value_type = INT;
				<span class="keyword">struct</span> ast * curr = ast_head;

				<span class="comment">// rewing head to the last element</span>
				<span class="keyword">while</span> (curr-&gt;next != NULL) {					
					curr = curr-&gt;next;
				}
				curr-&gt;next = new_node;

				<span class="built_in">printf</span>(<span class="string">"Int translated: %d"</span>, atoi(buffer));
			}			

			dot_was_detected = <span class="keyword">false</span>;
			numeric_start_pos = -<span class="number">1</span>;
			last_was_numeric = <span class="keyword">false</span>;
		}
	}

	print_ast(ast_head);
	getch();
	<span class="keyword">return</span> <span class="number">0</span>;
}
</pre></td></tr></table></figure><br>In conclusion it does nothing except for building a linked list just from numeric nodes. Like in <code>123+456.78</code> case it simply builds a list of two nodes: <code>[123]-&gt;[456.78]</code>.</p>
<p>What I can say from this ugliness - a lot of repetition and probably unneeded code. In the second post I will have it updated.</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


  
    <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-02-04T21:55:07.000Z"><a href="/2014/02/04/emacs_part3/">Feb 4 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/02/04/emacs_part3/">Emacs   Part 3</a></h1>
  

    </header>
    <div class="entry">
      
        <p>So I am here at part 3 improving my Emacs understanding each day while experimenting. I’ve gotta say - there’s a lot of useful stuff I have never header before!</p>
<h2 id="The_bad">The bad</h2>
<p>In Sublime Text I was used to two things very very very well and one thing quite a bit. Two being: mini map and tabbed interface, one being file tree explorer. My disappointment is that I have tried to use <em>Tabbar</em> but it really sucked as I immediately used Emacs in split-window mode and each of the windows have it’s own tab header which is maybe great but really unnatural for me. I will forget this for a while until I can mod it on my own or just get used to buffer switching.</p>
<h2 id="The_middle-man">The middle-man</h2>
<p>I have used <em>speedbar</em> which is average on file exploring(no tree structure) but has it’s main disadvantage - it’s a separate window. Come on - who uses that? Even if I work with a single screen I am still not going to resize Emacs to windows mode just to have <em>speedbar</em> opened. Or maybe I shouldn’t? Well.. - <em>sr-speedbar</em> to the rescue! Just <code>M-x package-list</code> install <em>sr-speedbar</em> and it is “Single Frame Speedbar” which is great. Except it’s quite ugly.</p>
<h2 id="The_good">The good</h2>
<p>Oh man! I have mentioned <em>skewer</em> in <a href="http://www.letsdive.in/2014/02/03/emacs_part2/" target="_blank" rel="external">part 2</a> and now I have played with it for a while. I didn’t give it a go in real project but for experiments it’s amazing!. Let me tell you why if you don’t know - it allows direct HTML/CSS/JS modifications in the real time. That sounds great but without an example these are just words! So example:</p>
<ol>
<li>Install <em>skewer</em> with the usual <code>M-x package-install</code></li>
<li>go into dired mode, hit <code>+</code> create “demo” folder and enter it</li>
<li><code>C-x C-f</code> type in “demo.js” <code>RET RET</code></li>
<li>3rd step with “demo.html”</li>
</ol>
<p>Now as my beginner emacs configuration may really suck I have manually enabled <em>js2-mode</em> and <em>skewer-mode</em>  on my <em>demo.js</em> buffer and <em>skewer-html</em> on <em>demo.html</em> buffer.</p>
<p>Let the magic start! - <code>M-x run-skewer</code>. Bam a new binded browser window appears. That’s cool. But sadly unusable.</p>
<p>Now as I have mentioned I am really sucky on Emacs so just made a node.js http server with connect library(to install - <code>npm install connect</code>):</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre>var <span class="keyword">connect</span> = <span class="keyword">require</span>(<span class="string">'connect'</span>);
<span class="keyword">connect</span>.createServer(
    <span class="keyword">connect</span>.static(__dirname)
).<span class="keyword">listen</span>(<span class="number">8000</span>);
</pre></td></tr></table></figure><br>Now - <code>node server.js</code><br><br>Now skewer runs on 8080 port and our demo app is hosted on 8000 port. All good but now how do I bind my <code>localhost:8000</code> to skewer? I have missed it at first but in readme there this javascript code:<br><figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>(<span class="function"><span class="keyword">function</span><span class="params">()</span>{</span><span class="keyword">var</span> d=document;<span class="keyword">var</span> s=d.createElement(<span class="string">'script'</span>);s.src=<span class="string">'http://localhost:8080/skewer'</span>;d.body.appendChild(s);})()
</pre></td></tr></table></figure><br>Man that’s advanced…! This script is really sucky because it appears that if I press some key bindings at the wrong file or place it throws an error and that’s all - I need to refresh the window manually and inject the script again. I will look for the error to appear again and will modify skewer js code to handle the situation painlessly.<br><br>As this code is injected that’s all. Our files are binded to our demo.html page. Let’s see what we can do. In <em>demo.html</em> let’s type in:<br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">html</span>&gt;</span>
  <span class="tag">&lt;<span class="title">head</span>&gt;</span>
    <span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span> <span class="attribute">src</span>=<span class="value">"demo.js"</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
	<span class="tag">&lt;<span class="title">style</span>&gt;</span><span class="css">
	  <span class="id">#box</span> <span class="rules">{
	    <span class="rule"><span class="attribute">position</span>:<span class="value"> absolute</span></span>;
		<span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">20</span>px</span></span>;
		<span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">20</span>px</span></span>;
		<span class="rule"><span class="attribute">background</span>:<span class="value"> blue</span></span>;
	  <span class="rule">}</span></span>
	</span><span class="tag">&lt;/<span class="title">style</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">head</span>&gt;</span>
  <span class="tag">&lt;<span class="title">body</span>&gt;</span>
    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"box"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>
	<span class="tag">&lt;<span class="title">button</span> <span class="attribute">id</span>=<span class="value">"click"</span>&gt;</span>Click to move!<span class="tag">&lt;/<span class="title">button</span>&gt;</span>
  <span class="tag">&lt;/<span class="title">body</span>&gt;</span>
<span class="tag">&lt;/<span class="title">html</span>&gt;</span>
</pre></td></tr></table></figure>

<p>Lets just now hit <code>C-M-x</code>. What I have noticed that it must be done at once. Not Control then Alt then x, but Control and Alt and then x. This loads the html code to browser.</p>
<p>Now inside <em>demo.js</em> lets do some simple stuff:</p>
<p><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="keyword">var</span> left = <span class="number">0</span>;
document.getElementById(<span class="string">'click'</span>).onclick = <span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
  left += <span class="number">2</span>;
  document.getElementById(<span class="string">'box'</span>).style.left = left + <span class="string">'px'</span>;
}
</pre></td></tr></table></figure><br>Now again - <code>C-M-x</code> to load the code in the browser. Now if I click the button a few times I can see that it moves by 2 pixels to the right after each click. The magic begins when I go to the <em>demo.js</em> and change <code>left += 2;</code> into <code>left += 20;</code> and hit <code>C-M-x</code>. Now lets click and what do we see? We can see the box moving to the right by 20 pixels but the page was not refreshed! The page kept it’s state, variables and other things in place!</p>
<h2 id="Extra">Extra</h2>
<p>As I have mentioned in part 2 - <code>C-x C-e</code> evaluates elisp normally and javascript in <em>js2-mode</em> so if I move my cursor to the end of <code>left += 2;</code> then hit <code>C-x C-e</code> and can see current value in the mini buffer. Yay! The same can be done for DOM elements where <code>document.getElementById()</code> appears!</p>
<h2 id="Conclusion">Conclusion</h2>
<p>I was really excited about skewer and really wanted to have it working. I simply don’t know why or if it’s useful but during my javascript development I really got tired of having my page state reseted after each change. Sometimes it’s just too slow for me to write some kind of automation because it’s just quicker and more efficient to hit F5 and manually fill in the details or adjust components to their desired state… Now with skewer in my hands I may do pretty things.</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


  
    <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-02-03T16:29:30.000Z"><a href="/2014/02/03/emacs_part2/">Feb 3 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/02/03/emacs_part2/">Emacs   Part 2: Skewer Mode</a></h1>
  

    </header>
    <div class="entry">
      
        <h2 id="Skewer">Skewer</h2>
<p>The second part went really quick(another day as you can see). I have found <a href="https://github.com/skeeto/skewer-mode" target="_blank" rel="external">skewer-mode</a> for emacs. I have found another - swank-js but skewer is made to be EASY to setup and so I tried. And so I enjoyed it.</p>
<p>Today is my second day using Emacs and I have full comfort in it. That just shows how little of functionality I have actually used from my editors in the past. Or maybe that Emacs is that good. So what’s the skewer? It’s Javascript evaluator in the browser as I can say in my own words. Why is it cool? Well… BECAUSE I CAN EDIT MY JAVASCRIPT DIRECTLY AND CHANGES APPEAR AS IMMEDIATELY AS I WANT.</p>
<p>Let’s look at the steps:</p>
<ol>
<li><code>C-x C-f</code> type in “demo.js” <code>RET</code><br>2) in the new file I do <code>M-x run-skewer</code><br>3) Then <code>M-x skewer-mode</code><br>4) Now I type this code:</li>
</ol>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="code"><pre><span class="keyword">var</span> obj = {
	name: <span class="string">"test object"</span>,
	run: <span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
	  <span class="keyword">return</span> <span class="string">'I am running...'</span>;
	}
}

<span class="keyword">var</span> a = <span class="number">3</span>;
<span class="keyword">var</span> x = <span class="built_in">Math</span>.random();
x;
obj.run();
</pre></td></tr></table></figure>

<p>Now to evaluate it’s the same as for elisp - <code>C-x C-e</code>. Now if I put my cursor on the <code>x;</code> at the end of it then <code>C-x C-e</code> and I see in the mini buffer - a random number - a result from <code>Math.random()</code>!. Now let’s have some fun and put the cursor at the end of <code>obj.run();</code> hit <code>C-x C-e</code> and what? An error? Ah yes! <code>C-c C-k</code> to load the whole source into the buffer then again retry this and it sure outputs “I am running…” in the mini buffer.</p>
<p>Unfortunately to log something out <code>console.log()</code> doesn’t work. There’s a special <code>skewer.log()</code> for this but I really don’t enjoy it. Now on the other side - there’s no reason an application should hold <code>console.log()</code> statements so I can live with that too. Note that once you ran <code>M-x run-skewer</code> it opened a new windows in a default browser and binded emacs to it. So for example if I type in <code>alert(&#39;EMACS&#39;);</code> put cursor at the end and hit <code>C-x C-e</code> it sure fires an alert in a binded window on a browser.</p>
<h2 id="Extra">Extra</h2>
<p>There’s a REPL which can be opened with <code>M-x skewer-repl</code>. I don’t know how much this is useful as I am used to pressing <code>C-shift-j</code> or F12 and manually selecting <em>Console</em> to do my REPL stuff.</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


  
    <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-02-02T12:28:48.000Z"><a href="/2014/02/02/emacs_part1/">Feb 2 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/02/02/emacs_part1/">Emacs   Part 1</a></h1>
  

    </header>
    <div class="entry">
      
        <p>I have always had interest in some old bizarre editor like <em>vim</em> or <em>emacs</em>. A few years ago I started to notice that I really enjoy using keyboard instead of a mouse and so I tried to learn all most often used key combination in all the software I use daily.</p>
<p>I though that I am a typing machine because I use so much of my keyboard. Wrong. I compiled a list of my often used combinations and it is… small. Look:</p>
<table>
<thead>
<tr>
<th>Combination</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>C-a</td>
<td>select all</td>
</tr>
<tr>
<td>C-c</td>
<td>copy selected</td>
</tr>
<tr>
<td>C-x</td>
<td>cut selected</td>
</tr>
<tr>
<td>C-v</td>
<td>paste</td>
</tr>
<tr>
<td>C-z</td>
<td>undo</td>
</tr>
<tr>
<td>C-z</td>
<td>redo</td>
</tr>
<tr>
<td>C-f</td>
<td>search</td>
</tr>
<tr>
<td>C-h</td>
<td>search and replace</td>
</tr>
<tr>
<td>C-s</td>
<td>save</td>
</tr>
<tr>
<td>C-d</td>
<td>set multiple cursors</td>
</tr>
<tr>
<td>C-shift-s</td>
<td>save as</td>
</tr>
<tr>
<td>shift-arrow</td>
<td>move in direction while selecting. For example if I am at the top of the page and I do</td>
</tr>
<tr>
<td>C-arrow</td>
<td>jump by words forward or backward</td>
</tr>
<tr>
<td>C-shift-arrow</td>
<td>move block of selected text around</td>
</tr>
<tr>
<td>C-] and C-[</td>
<td>indent block forward/backwards</td>
</tr>
<tr>
<td>C-tab</td>
<td>shift through the files forward</td>
</tr>
<tr>
<td>C-shift-tab</td>
<td>shift backwards through the files</td>
</tr>
</tbody>
</table>
<p>For example: now I press and hold PgUp key then hit Home key to get back to the start of a line then shift-down(5 times) and I have just successfully selected first 5 lines. Then I can copy them (C-c) and paste anywhere I want or to move them with C-shift-arrows.</p>
<p>As a great exercise I have turned this blog entry into my emacs exercise - I am writing this post from within emacs in markdown. On the very basic level I have really liked emacs after maybe two hours of experimenting and I have almost have all my key bindings in emacs. I did not redefine emacs commands so they would match the ones in the table. I am trying to use emacs as it is.</p>
<p>In emacs there are only two control keys - C(trl) and M(alt) by default. It really clicks me as I am used that these keys provide additional functionality for my keys. The commands are written in a form like <code>C-x C-f</code> which means <code>press and hold Ctrl then x, release both, press and hold Ctrl then f, release</code>. So here’s the article with translations of my combinations to emacs combinations.</p>
<p>I have not put them in table as emacs has a bit different interface. For example in emacs way to select some text I go to the starting position and click <code>C-space</code> then I go around with arrow keys and once I want to copy what I have selected I do <code>M-w</code>.</p>
<h2 id="Copy_+_Paste">Copy + Paste</h2>
<p>To paste the text it’s <code>C-y</code>. Copying and pasting was the fastest thing in emacs I got right from the start. I move my arrows then <code>C-space</code> then <code>M-w</code> then somewhere else it’s <code>C-y</code>. If I want to cut the text - it’s <code>C-w</code> instead of <code>M-w</code>. See the similarity? The same key but different control key and it’s <em>copy</em> or <em>cut</em>.</p>
<h2 id="Undo_+_Redo">Undo + Redo</h2>
<p>To undo/redo I use <code>C-/</code>. This works like a normal undo however if I would like to redo I just click <code>C-f</code> and then each <code>C-/</code> is a redo. <code>C-f</code> again and it’s undo again. I believe this will be a little sucker for a while as I don’t have any clue about current state. While writing this post I have done it a few times and it really feels natural for me except the <code>C-f</code> part where I am not sure if I am undoing or redoing.</p>
<h2 id="Search">Search</h2>
<p>To search within a current file I use <code>C-s</code>. This is not as I am used too because this only searched in down-direction only and doesn’t accept a regex. Of course I don’t believe emacs does not have an easy way to fix this and doing <code>C-h k</code> meaning <em>describe a keybinding for me</em> gives me that pressing <code>M-r</code> gives me regular expression search. Yes it works good. It sucks a bit that some of keys like DEL have special meaning so it’s not so easy to modify search so I just press <code>C-g</code> to cancel current command then hit <code>C-s</code> again and type in from the scratch. I don’t want to burden myself with ALL the details about each command, I just want a way to do my daily combinations even if not so well but I really think this will be over in a few moments. On the other note - <code>C-r</code> turns on search backwards so I can live with that temporarily until I will learn enough Emacs LISP to modify them.</p>
<h2 id="Search_+_Replace">Search + Replace</h2>
<p>Search without a replace is only 50% of functionality I need. Search and replace can be done with <code>M-%</code> which is <code>M-shift-5</code> on my keyboard. I simply enter string to replace hit <code>RET</code> then enter string to replace with. No this will not immediately change everything but will go through each occurrence of entered string. <code>n</code> skips the replace for selected result and <code>y</code> or <code>space</code> replaces the occurrence. Of course sometimes I like simply ALL the occurrences changed then instead of <code>y</code> or <code>space</code> one should hit <code>!</code> to replace all the occurrences.</p>
<h2 id="Selections">Selections</h2>
<p>Select all. I though that this will be available as some easy command but I managed to get around this by a quick combination of keys. Lets rinse and repeat:</p>
<ol>
<li><code>C-home</code> - goes to the very top and puts cursor at the first character on the first line of my current buffer.</li>
<li><code>C-space</code> - turns on selection mode.</li>
<li><code>C-end</code> - goes to the very bottom to the last character so all the content is selected.</li>
<li><code>M-w</code>   - copy all I have selected(all the content).<br><em>NEAT!</em><br>What’s more neat that there’s a default keybinding for this - <code>C-x h</code>. I really though that I will have to remap these myself and I am happy that I will not have to do so.</li>
</ol>
<h2 id="Files">Files</h2>
<p>Saving files is simple. I noticed that a lot of IO commands start with <code>C-x</code>. For example if I want to open some file I do <code>C-x C-f</code> then type in the whole filename or just part of it and hit <code>tab</code> then I see possible files for my query. I can also navigate in the query through the folders. If I type in not existing file I simply just got it created. This doesn’t feel all natural as if I close the file with <code>C-x C-k</code>(kill buffer) it doesn’t get saved. <code>C-x C-s</code> does that as it forces to write the contents into the file I just created. If I am lazy enough to open search file query and create a new file from there I can hit <code>C-x C-w</code> and enter a filename in the query to have current buffer saved as that file. So now for example if I create a HTML file and would like to save it and work on it later(saving each modification) I do these steps:</p>
<ol>
<li><code>C-x C-f</code></li>
<li>enter <code>test.html</code></li>
<li>type in <html></html></li>
<li><code>C-x C-s</code><br>Done. Now we have test.html file with <code>&lt;html&gt;&lt;/html&gt;</code> as contents and it’s currently opened in our emacs buffer.</li>
</ol>
<h2 id="Cursors">Cursors</h2>
<p>Multiple cursors for the win! Multiple cursors are simply an effect of <em>rectangles</em>. Rectangle commands can be reached with <code>C-x r</code> then often another letter is an operation. For example <code>t</code> - insert text, <code>d</code> - delete. Now rectangles can be quite tricky as from my short experience with emacs. For example if I have this text:</p>
<p>  hello/world/file1.txt<br>  hello/world/file2.txt<br>  hello/world/file3.txt<br>  hello/world/file4.txt<br>  hello/world/file5.txt</p>
<p>and I would like to delete <em>hello/world/</em> part or replace with <em>another/path/</em>. Lets do this:</p>
<ol>
<li>go to the first hello, put cursor on <em>h</em> letter</li>
<li><code>C-space</code> or simply hit shift</li>
<li>with arrows go to world on the last line, put cursor on <em>/</em> character</li>
<li><code>C-x r d</code> to delete all the <em>hello/world/</em> or <code>C-x r t</code> then type in <em>another/path/</em> and hit enter</li>
</ol>
<p>Vuola! This is not like multiple cursors where I was used to Sublimes <code>C-d</code> to set the cursor on another occurrence on currently selected word or search result however for a while I can live with rectangles or search and replace.</p>
<h2 id="Buffers">Buffers</h2>
<p>Shifting through the buffers or files. Multiple windows. Now as I have opened a few files I have one big screen with this blog entry in it. I can switch through the buffers with <code>C-x arrow</code> where arrow is left/right arrow. So yeah <code>C-x right right right left left left</code> returns me back to where I am. Of course this is handy only when I have maybe 2 or 3 files opened and I want to switch between them quickly… But what if I have multiple buffers opened and just want to navigate through them? <code>C-x b</code> to the rescue! As I have ido mode enabled once I press <code>C-x b</code> I get a nice list of buffers and I can simply type part of the name of it and hit <code>RET</code> and here I am. So now I see that I have buffers: “Shell Command Output”, “Help”, “Info”, “emacs_part1.md”, … I hit <code>C-x b</code> type in <code>shel</code> hit <code>RET</code> and I am in “Shell Command Output” buffer. While being there I hit <code>C-x b</code> type in “em pa” hit <code>RET</code> and I am inside this blog again.</p>
<p>Now what about windows? Hit <code>C-x 2</code> and two windows appear with the same blog in it splitted horizontally. If I hit <code>C-x 3</code> two windows appear side by side. Now I am currently in my first buffer and I want to display “Shell Command Output” in another. I hit <code>C-x o</code> to switch buffers and my cursor appears in the second window. <code>C-x b</code> type in “she” hit <code>RET</code> and the second window is filled with “Shell Command Output” contents in it. Now I can switch back to my blog with <code>C-x o</code> again. This is really nice! While I am on my blog, I would like to make it again single fullscreen so I hit <code>C-x 1</code>.</p>
<h2 id="Extra!">Extra!</h2>
<p>Some extra before finishing first part! We can use ELISP anywhere in the emacs. What do I mean? If I type in here (* 1 2 3), then select it with shift and arrow then hit <code>C-x C-e</code> it evaluates the expression and shows the result in the bottom.</p>
<h2 id="Conclusion">Conclusion</h2>
<p>Moving selected lines of text around as I do easily in sublime is not that basic from my research so I leave it for another part.</p>
<p>What I suggest - first watch the parts on <a href="https://www.youtube.com/watch?v=MRYzPWnk2mE" target="_blank" rel="external">YouTube</a> and then you can use this post as a reference. The video series go through the basics. Customization of emacs and common problems. All the parts weight maybe 40minutes in total so it’s really a no brainer not to watch them.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre>(<span class="variable">My</span> current happiness levels because <span class="keyword">of</span> emacs?)
&gt; <span class="variable">High</span>!
</pre></td></tr></table></figure>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


  
    <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-01-20T20:00:00.000Z"><a href="/2014/01/20/building functions in realtime/">Jan 20 2014</a></time>
      
      
  
    <h1 class="title"><a href="/2014/01/20/building functions in realtime/">Building Functions in Realtime</a></h1>
  

    </header>
    <div class="entry">
      
        <p>While solving a challenge on <a href="www.codewars.com/r/gd4bDw">coding katas</a> I came accross one more LISPy thing. The challenge was to construct a string from an <code>expression(like(this())) // =&gt; &quot;expression like this.&quot;</code> note the dot at the end.</p>
<p>It is really similar to the one I solved some time ago where the solution should process this code:<br><code>one(plus(two(minus(three())))) // =&gt; 0</code><br>The solution was quite simple: I just returned numbers for each digit function(one, two, three…nine) and some processing for arithmetic operations.</p>
<p>In this case I built a wrapper:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="code"><pre><span class="function"><span class="keyword">function</span> <span class="title">build_functions_from_names</span><span class="params">(<span class="comment">/* names */</span>)</span> {</span>
  <span class="keyword">var</span> names;
  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">arguments</span>[<span class="number">0</span>] == <span class="string">'object'</span>) {
    names = <span class="built_in">arguments</span>[<span class="number">0</span>];  
  } <span class="keyword">else</span> {
    names = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);
  }
  
  names.forEach(<span class="function"><span class="keyword">function</span><span class="params">(name)</span> {</span>
    <span class="keyword">this</span>[name] = <span class="function"><span class="keyword">function</span><span class="params">(partial)</span> {</span>
      partial = partial ? (<span class="string">' '</span> + partial) : <span class="string">'.'</span>;  <span class="comment">// take care of a dot</span>
      <span class="keyword">return</span> name + partial; 
    };
  });  
}
</pre></td></tr></table></figure>

<p>Now of course it is bad, yes it is, because it pollutes global namespace. But now I just wanted to enjoy the damn thing and experiment. A solution for having a nice wrapper in this case handling custom namespaces would be wrap the wrapper inside self-executing function and pass in <code>this</code> like</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>var wrapper = (<span class="keyword">function</span>(namespace) {<span class="keyword">...</span>})(this);
</pre></td></tr></table></figure><br>but this causes a headache of having a nice way to pass in arguments. The simplest way would be to return a function making wrappers for passed namespace but that I consider a bloat in this fun case.<br><br>How does it produce a string? Simply:<br><figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="function">build_functions_from_names(<span class="string">'This is just a test'</span>.<span class="function">split(<span class="string">' '</span>)</span>)</span>;
console<span class="class">.log</span>(<span class="function">This(<span class="function">is(<span class="function">just(<span class="function">a(<span class="function">test()</span> )</span>)</span>)</span>)</span> ); <span class="comment">// =&gt; "This is just a test"</span>
</pre></td></tr></table></figure>

<p>I really enjoy bending Javascript.</p>

      
    </div>
    <footer>
      
        
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


  

  <nav id="pagination">
  
    <a href="/archives/page/2/" class="alignleft prev">Prev</a>
  
  
    <a href="/archives/page/4/" class="alignright next">Next</a>
  
  <div class="clearfix"></div>
</nav>
</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:www.letsdive.in">
  </form>
</div>

  

  
<div class="widget tag">
  <h3 class="title">Tags</h3>
  <ul class="entry">
  
    <li><a href="/./SICP/">SICP</a><small>2</small></li>
  
    <li><a href="/./Scheme/">Scheme</a><small>2</small></li>
  
    <li><a href="/./backtracking/">backtracking</a><small>1</small></li>
  
    <li><a href="/./bower/">bower</a><small>1</small></li>
  
    <li><a href="/./brainfuck/">brainfuck</a><small>1</small></li>
  
    <li><a href="/./c/">c</a><small>2</small></li>
  
    <li><a href="/./c++/">c++</a><small>3</small></li>
  
    <li><a href="/./csp/">csp</a><small>1</small></li>
  
    <li><a href="/./editor/">editor</a><small>5</small></li>
  
    <li><a href="/./emacs/">emacs</a><small>5</small></li>
  
    <li><a href="/./functional-programming/">functional programming</a><small>2</small></li>
  
    <li><a href="/./glsl/">glsl</a><small>5</small></li>
  
    <li><a href="/./graphics/">graphics</a><small>5</small></li>
  
    <li><a href="/./grunt/">grunt</a><small>1</small></li>
  
    <li><a href="/./javascript/">javascript</a><small>14</small></li>
  
    <li><a href="/./productivity/">productivity</a><small>5</small></li>
  
    <li><a href="/./project-euler/">project euler</a><small>5</small></li>
  
    <li><a href="/./style/">style</a><small>1</small></li>
  
    <li><a href="/./sudoku/">sudoku</a><small>1</small></li>
  
    <li><a href="/./voronoi/">voronoi</a><small>1</small></li>
  
    <li><a href="/./workflow/">workflow</a><small>1</small></li>
  
    <li><a href="/./yeoman/">yeoman</a><small>1</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2015 Lukas Pukenis
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<script type="text/javascript">
var disqus_shortname = 'letsdive';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>



<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-44498783-1', 'letsdive.in');
  ga('send', 'pageview');
</script>
</body>
</html>